<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Two-Calendar Alignment with Days Passed</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f8faff;
    padding: 2rem;
    color: #222;
  }
  h1 { text-align: center; }
  .container {
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
  label { display: block; margin-top: 1rem; font-weight: bold; }
  input[type=range] { width: 100%; }
  .timeline {
    position: relative;
    height: 40px;
    background: #e4ebf5;
    border-radius: 20px;
    overflow: hidden;
    margin-top: 1rem;
  }
  .marker {
    position: absolute;
    top: 0;
    width: 2px;
    height: 100%;
  }
  .marker.blue { background: #007bff; }
  .marker.green { background: #28a745; }
  .currentDay { position: absolute; top: 0; width: 4px; height: 100%; background: #ff4757; }
  .rowLabel { margin-top: 0.5rem; font-weight: bold; }
  .result {
    text-align: center;
    margin-top: 1.5rem;
    background: #f0f7ff;
    padding: 1rem;
    border-radius: 8px;
  }
</style>
</head>
<body>
<div class="container">
  <h1>üìÖ Two-Calendar Alignment</h1>

  <label>Days passed: <span id="daysLabel">0</span></label>
  <input type="range" id="days" min="0" max="400" value="0">

  <label>Calendar 1 month length: <span id="m1Label">30</span> days</label>
  <input type="range" id="m1" min="6" max="30" value="30">

  <label>Calendar 2 month length: <span id="m2Label">20</span> days</label>
  <input type="range" id="m2" min="6" max="30" value="20">

  <div class="rowLabel">Calendar 1</div>
  <div class="timeline" id="timeline1"></div>

  <div class="rowLabel">Calendar 2</div>
  <div class="timeline" id="timeline2"></div>

  <div class="result" id="result"></div>
</div>

<script>
const days = document.getElementById("days");
const daysLabel = document.getElementById("daysLabel");
const m1 = document.getElementById("m1");
const m2 = document.getElementById("m2");
const m1Label = document.getElementById("m1Label");
const m2Label = document.getElementById("m2Label");
const timeline1 = document.getElementById("timeline1");
const timeline2 = document.getElementById("timeline2");
const result = document.getElementById("result");

function gcd(a,b){ return b ? gcd(b, a % b) : a; }
function lcm(a,b){ return (a*b)/gcd(a,b); }

function draw(){
  const day = parseInt(days.value);
  const len1 = parseInt(m1.value);
  const len2 = parseInt(m2.value);
  daysLabel.textContent = day;
  m1Label.textContent = len1;
  m2Label.textContent = len2;

  const align = lcm(len1, len2);
  const maxDays = align; // visualize up to next alignment

  function makeTimeline(container, monthLen, color){
    container.innerHTML = "";
    const months = Math.ceil(maxDays / monthLen);
    for(let i=1;i<=months;i++){
      const div = document.createElement("div");
      div.className = "marker " + color;
      div.style.left = (i * monthLen / maxDays * 100) + "%";
      container.appendChild(div);
    }
    // current day marker - fixed calculation
    const current = document.createElement("div");
    current.className = "currentDay";
    current.style.left = (day / maxDays * 100) + "%";
    container.appendChild(current);
  }

  makeTimeline(timeline1, len1, "blue");
  makeTimeline(timeline2, len2, "green");

  // Fixed date calculations
  const date1 = { 
    month: Math.floor(day / len1) + 1, 
    day: (day % len1) + 1 
  };
  const date2 = { 
    month: Math.floor(day / len2) + 1, 
    day: (day % len2) + 1 
  };

  result.innerHTML = `
    üü¶ Calendar 1: ${len1}-day months ‚Üí Month ${date1.month}, Day ${date1.day}<br>
    üü© Calendar 2: ${len2}-day months ‚Üí Month ${date2.month}, Day ${date2.day}<br><br>
    üîÅ Calendars align every <b>${align}</b> days.
  `;
}

[days, m1, m2].forEach(el => el.addEventListener("input", draw));
draw();
</script>
</body>
</html>