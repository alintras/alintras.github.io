<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calendar Alignment Visualizer</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f7faff;
    padding: 2rem;
    color: #222;
  }
  h1 {
    text-align: center;
    margin-bottom: 1rem;
  }
  .container {
    max-width: 900px;
    margin: auto;
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
  label {
    display: block;
    margin-top: 1rem;
    font-weight: bold;
  }
  input[type=range] {
    width: 100%;
  }
  .timeline {
    position: relative;
    height: 40px;
    background: #e0e8f0;
    margin-top: 1.5rem;
    border-radius: 20px;
    overflow: hidden;
  }
  .progress {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    border-radius: 20px;
  }
  #oldProgress { background: linear-gradient(90deg, #4a90e2, #007bff); }
  #newProgress { background: linear-gradient(90deg, #50c878, #2ecc71); }
  .marker {
    position: absolute;
    top: -10px;
    width: 20px;
    height: 60px;
    background: #ff4757;
    border-radius: 10px;
    transform: translateX(-50%);
  }
  .result {
    text-align: center;
    font-size: 1.2rem;
    margin-top: 1.5rem;
    background: #f0f7ff;
    padding: 1rem;
    border-radius: 8px;
  }
  button {
    display: block;
    margin: 1.5rem auto 0 auto;
    background: #4a90e2;
    color: white;
    border: none;
    padding: 0.7rem 1.5rem;
    border-radius: 8px;
    font-size: 1rem;
    cursor: pointer;
    transition: 0.3s;
  }
  button:hover { background: #3578d0; }
</style>
</head>
<body>
  <div class="container">
    <h1>üìÖ Calendar Alignment Visualizer</h1>

    <label>Old month length (6‚Äì30 days): <span id="oldDaysLabel">30</span></label>
    <input type="range" id="oldDays" min="6" max="30" value="30">

    <label>New month length (6‚Äì30 days): <span id="newDaysLabel">25</span></label>
    <input type="range" id="newDays" min="6" max="30" value="25">

    <button id="startBtn">‚ñ∂ Play Simulation</button>

    <div class="timeline">
      <div class="progress" id="oldProgress"></div>
    </div>
    <div style="text-align:center; font-weight:bold;">Old Calendar</div>

    <div class="timeline">
      <div class="progress" id="newProgress"></div>
    </div>
    <div style="text-align:center; font-weight:bold;">New Calendar</div>

    <div class="result" id="result">
      Waiting to start simulation...
    </div>
  </div>

  <script>
    const oldDaysSlider = document.getElementById("oldDays");
    const newDaysSlider = document.getElementById("newDays");
    const oldLabel = document.getElementById("oldDaysLabel");
    const newLabel = document.getElementById("newDaysLabel");
    const oldProgress = document.getElementById("oldProgress");
    const newProgress = document.getElementById("newProgress");
    const result = document.getElementById("result");
    const startBtn = document.getElementById("startBtn");

    let running = false;
    let day = 0, interval;

    function lcm(a, b) {
      const gcd = (x, y) => (y === 0 ? x : gcd(y, x % y));
      return Math.abs(a * b) / gcd(a, b);
    }

    function updateLabels() {
      oldLabel.textContent = oldDaysSlider.value;
      newLabel.textContent = newDaysSlider.value;
      result.textContent = "Ready. Click ‚ñ∂ to start simulation.";
    }

    function simulate() {
      const oldLen = parseInt(oldDaysSlider.value);
      const newLen = parseInt(newDaysSlider.value);
      const cycle = lcm(oldLen, newLen);

      day = 0;
      clearInterval(interval);

      interval = setInterval(() => {
        day++;
        const oldPos = (day % oldLen) / oldLen * 100;
        const newPos = (day % newLen) / newLen * 100;

        oldProgress.style.width = oldPos + "%";
        newProgress.style.width = newPos + "%";

        if (day % oldLen === 0 && day % newLen === 0) {
          result.textContent = `Calendars align again after ${day} days.`;
          clearInterval(interval);
          running = false;
          startBtn.textContent = "‚ñ∂ Play Simulation";
          return;
        } else {
          result.textContent = `Day ${day} ‚Äî Old: ${(day % oldLen) + 1}/${oldLen}, New: ${(day % newLen) + 1}/${newLen}`;
        }

        if (day > cycle * 2) { // safety stop if something odd happens
          result.textContent = "Stopped ‚Äî no alignment found within 2 cycles.";
          clearInterval(interval);
          running = false;
          startBtn.textContent = "‚ñ∂ Play Simulation";
        }
      }, 50);
    }

    startBtn.addEventListener("click", () => {
      if (!running) {
        running = true;
        startBtn.textContent = "‚è∏ Pause";
        simulate();
      } else {
        running = false;
        startBtn.textContent = "‚ñ∂ Resume";
        clearInterval(interval);
      }
    });

    oldDaysSlider.addEventListener("input", updateLabels);
    newDaysSlider.addEventListener("input", updateLabels);
    updateLabels();
  </script>
</body>
</html>